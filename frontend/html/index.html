<!Doctype html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="index.css">
        <title>Market</title>
    </head>
    <body class="index" onload="visiter()">
        <header class="market-data">

            <div class="currency-holder" style="margin-left: 10%;">
                <img class="currency-img" src="dollar-sign-solid.svg" alt="dollar-sign"> <span class="currency-price" id="dollar"></span>
                <div class="loader" id="dollar-loader"></div>
            </div>

            <div class="currency-holder" style="margin-left: 1%;">
                <img class="currency-img" src="euro-sign-solid.svg" alt="euro-sign"> <span class="currency-price" id="euro"></span>
                <div class="loader" id="euro-loader"></div>
            </div>

            <div class="currency-holder" style="margin-left: 1%;">
                <img class="currency-img" src="yen-sign-solid.svg" alt="yen-sign"> <span class="currency-price" id="yuan"></span>
                <div class="loader" id="yuan-loader"></div>
            </div>

            <div class="currency-holder" style="margin-left: 1%;">
                <img class="currency-img" src="bitcoin-brands.svg" alt="bitcoin-sign"> <span class="currency-price" id="bitcoin" style="color: white;"></span>
                <div class="loader" id="bitcoin-loader"></div>
            </div>

            <div class="currency-holder" style="margin-left: 1%;">
                <img class="currency-img" src="ethereum-brands.svg" alt="ethereum-sign"> <span class="currency-price" id="ethereum" style="color: white;"></span>
                <div class="loader" id="ethereum-loader"></div>
            </div>

            <div class="currency-holder" style="margin-left: 1%;">
                <img class="currency-img" src="coins-gold.svg" alt="gold-sign" > <span class="currency-price" id="gold" style="color: white;"></span>
                <div class="loader" id="gold-loader"></div>
            </div>

            <div class="currency-holder" style="margin-left: 1%;">
                <img class="currency-img" src="coins-silver.svg" alt="silver-sign"> <span class="currency-price" id="silver" style="color: white;"></span>
                <div class="loader" id="silver-loader"></div>
            </div>
        </header>
        <br>
        <h1 id="DivContent"></h1>
        <h1 class="banner" id="market">
            Market
            <p class="statement">Innovating the Prehistoric</p>
        </h1>
        <h2 class="release">Summer 2021</h2>
        <footer class="footer">
        </footer>

        <script>

            function visiter(){
                // make the post to the backend
                fetch("https://theopenmarket.org/api",
                    {
                        method : "POST",
                        mode: "cors",
                        headers : {
                            "Content-Type" : "application/json; charset=utf-8"
                        },
                        body : JSON.stringify({})
                    }
                ).then(response => response.json())
                .then(data => 
                    {
                        currencies = data.currencies
                        document.getElementById('dollar-loader').style.display = "none"
                        document.getElementById('dollar').innerHTML = currencies.dollar

                        document.getElementById('euro-loader').style.display = "none"
                        document.getElementById('euro').innerHTML = currencies.euro 

                        document.getElementById('yuan').innerHTML = currencies.yuan
                        document.getElementById('yuan-loader').style.display = "none"
                        
                        document.getElementById('bitcoin').innerHTML = currencies.bitcoin + '<sub> USD </sub>'
                        document.getElementById('bitcoin-loader').style.display = "none"

                        document.getElementById('ethereum').innerHTML = currencies.ethereum + '<sub> USD </sub>'
                        document.getElementById('ethereum-loader').style.display = "none"

                        document.getElementById('gold').innerHTML = currencies.gold + '<sub> oz USD </sub>'
                        document.getElementById('gold-loader').style.display = "none"

                        document.getElementById('silver').innerHTML = currencies.silver + '<sub> oz USD </sub>'
                        document.getElementById('silver-loader').style.display = "none"
                    }
                ) 
            }


        </script>


    </body>
</html>