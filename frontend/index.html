<!Doctype html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="index.css" media="screen"/>
    </head>
    <body>
        <br>
        <h1 class="banner" id="alphax"></h1>

        <div class="login">
            <input type="email" placeholder="email" name="email" id="email" required> <br><br>
            <input type="password" placeholder="password" name="psw" id="password" required> <br><br>
            <button type="submit" onclick="login()">Login</button>  <button type="submit" onclick="signup()">Sign up</button>
        </div>

        <script>
            function alphax(){
                return "&#945lpha".fontcolor("red") + "X".fontcolor("black")  
            }
            document.getElementById("alphax").innerHTML = window.alphax();

            function login(){
                email = document.getElementById('email').value
                password = document.getElementById('password').value
                
                // make the post to the backend
                fetch("http://0.0.0.0:5000/login",
                    {
                        method : "POST",
                        mode: "cors",
                        headers : {
                            "Content-Type" : "application/json; charset=utf-8"
                        },
                        body : JSON.stringify(
                            {
                                email: email,
                                password : password
                            }
                        )
                    }
                ).then(response => response.json())
                .then(data => 
                    {
                        if (data["token"]) {
                            // create cookie for user
                            document.cookie = "alphax_token="+data['token']

                            location.replace("/dashboard")

                        }else{
                            //inform backend user that login failed
                            alert("Failure to login")
                        }
                    }
                ) 
            }

            function signup(){
                location.replace("/signup")
            }


        </script>


    </body>
</html>